<head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <!-- Keep link for icons/ make sure to add to all htmls with icons-->
  </head>

<ng-template #content let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Job update</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">

    <form [formGroup]="jobEditForm" autocomplete="off" style="margin: 20px">

      <div class="row">
        <div class="form-group col-md-6">
          <label for="name"> <strong>Job Title</strong></label>
          <input formControlName="name" type="text" class="form-control" id="name">
        </div>

        <div class="form-group col-md-6">
          <label for="company"> <strong>Company</strong></label>
          <input formControlName="company" type="text" class="form-control" id="company" disabled>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-md-6">
          <label for="city"><strong>City</strong></label>
          <input formControlName="city" type="text" class="form-control" id="city" disabled>

        </div>

        <div class="form-group col-md-6">
          <label for="country"><strong>Country</strong></label>
          <input formControlName="country" type="text" id="country" class="form-control" disabled>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-md-6">
          <label for="category"><strong>Category</strong></label>
          <select formControlName="category" id="category" class="form-control">
            <option *ngFor=" let selectedCategory of categories" [ngValue]="selectedCategory.name">{{selectedCategory.name}}</option>
          </select>
        </div>
        <div class="form-group col-md-6">
          <label for="type"><strong>Type</strong></label>
          <select formControlName="type" id="type" class="form-control">
            <option *ngFor=" let selectedType of types" [ngValue]="selectedType.name">{{selectedType.name}}</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-md-12">
          <label for="description"><strong>Description</strong></label>
          <textarea class="form-control" formControlName="description" name="description" rows="7" cols="45" style="margin: 10px; resize: none; margin-right:10%;"> </textarea>
        </div>
      </div>
    </form>

  </div>
  <div class="modal-footer">
    <button type="submit" class="btn " (click)="c('Save click')">Save</button>
  </div>
</ng-template>

<div class="backgroundG ">
 
 
  
</div>

  <div class="container ">
    <h3> A.5 Job Maintenance Screen</h3>
    <ngb-tabset>
      <ngb-tab title="Available Jobs">
        <ng-template ngbTabContent>
          <h3> Jobs </h3>
          <div>

              <div class="col-md-12 ">

                  <label for="filterBy"><strong> Filter by: </strong></label>
                  <div class="row">
                    <div class="col-md-4">
                      <select (change)="selectDropdownChangeHandler($event)" id="filter">
                        <option selected> All Jobs</option>
                        <option> Job Title </option>
                        <option> Company </option>
                        <option> Location/City </option>
                        <option> Location/Country </option>
                        <option> Category </option>
                        <option> Type </option>
                      </select>
                    </div>
                    <div class="col-md-6">
                      <input [(ngModel)]='listFilter' type="search" id="searchBar" class="form-control " >
                    </div>
                    <div class="col-md-2">
                        <button fromControl="search" type="button" class=" btn ">  <i class="material-icons">
                            search
                          </i></button><br>
                    </div>
                  </div>
                </div>

            <!--Table-->
            <table class="table table-striped" >

              <!--Table head-->
              <thead>
                <tr>
                  <th>Job Title</th>
                  <th>Company</th>
                  <th>Location</th>
                  <th>Category</th>
                  <th>Type</th>
                  <th>Edit</th>
                  <th> Remove </th>
                </tr>
              </thead>
              <!--Table head-->

              <!--Table body-->
              <tbody>
                <tr *ngFor="let job of filteredJobs">
                  <td> {{job.jobName}} </td>
                  <td> {{job.company}}</td>
                  <td> {{job.city}}, {{job.country}} </td>
                  <td> {{job.jobCategory}} </td>
                  <td>{{job.jobType}}</td>
                  
                  <td> <button type="button" class="btn" (click)="openEdit(content, job)"> <i class="material-icons">
                    edit
                    </i> </button> </td>
                 
                  <td>
                    <button type="button" class=" btn " (click)=" setJobInactive(job.jobId)" >  <i class="material-icons">
                        subdirectory_arrow_right
                      </i></button><br>
                  
                  </td> 
                
                 
    
                </tr>
              </tbody>
              
            </table>
         

          </div>

        </ng-template>
      </ngb-tab>
      <ngb-tab>
        <ng-template ngbTabTitle> Past Jobs</ng-template>
        <ng-template ngbTabContent>
          <h3> Past Jobs </h3>


          <div>

              <div class="col-md-12 ">

                  <label for="filterBy"><strong> Filter by: </strong></label>
                  <div class="row">
                    <div class="col-md-4">
                      <select (change)="selectDropdownChangeHandler($event)" id="filter">
                        <option selected> All Jobs</option>
                        <option> Job Title </option>
                        <option> Company </option>
                        <option> Location/City </option>
                        <option> Location/Country </option>
                        <option> Category </option>
                        <option> Type </option>
                      </select>
                    </div>
                    <div class="col-md-6">
                      <input [(ngModel)]='listInactiveFilter' type="search" id="searchBar" class="form-control " >
                    </div>
                    <div class="col-md-2">
<<<<<<< HEAD
                        <button fromControl="search" type="button" class=" btn ">  <i class="material-icons">
                            search
                          </i></button><br>
=======
                      <button fromControl="search" type="button" class=" btn " click="listFilter(listFilter)">  <i class="material-icons">
                          search
                          </i> </button><br>
>>>>>>> 03b7f45bc5dc5c074db4d320d499c83a7ac57405
                    </div>
                  </div>
                </div>

            <!--Table-->
            <table class="table table-striped">

              <!--Table head-->
              <thead>
                <tr>
                  <th>Job Title</th>
                  <th>Company</th>
                  <th>Location</th>
                  <th>Category</th>
                  <th>Type</th>
                  <th>Edit</th>
                  <th>Active/Inactive</th>
                </tr>
              </thead>
              <!--Table head-->

              <!--Table body-->
              <tbody>
                <tr *ngFor="let inactiveJob of inactiveFilteredJobs">
                  <td> {{inactiveJob.jobName}}</td>
                  <td> {{inactiveJob.company}}</td>
                  <td> {{inactiveJob.city}}, {{inactiveJob.country}} </td>
                  <td> {{inactiveJob.jobCategory}} </td>
                  <td>{{inactiveJob.jobType}}</td>
                  <td> <button type="button" class="btn" (click)="openEdit(content, inactiveJob)"> <i class="material-icons">
                      edit
                      </i> </button> </td>
                  <td> <button type="button" class="btn" (click)=" setJobActive(inactiveJob.jobId)">Activate</button></td>
                </tr>
              </tbody>
              <!--Table body-->
            </table>
            <!--Table-->

          </div>

        </ng-template>
      </ngb-tab>

      <ngb-tab>
        <ng-template ngbTabTitle> Drafts(Jobs) </ng-template>
        <ng-template ngbTabContent>
          <h3> Drafts </h3>


          <!--Table-->
          <table class="table table-striped">

            <!--Table head-->
            <thead>
              <tr>
                <th>Job Title</th>
                <th>Company </th>
                <th>Location</th>
                <th>Category</th>
                <th>Type</th>
                <th>Edit</th>
              </tr>
            </thead>
            <!--Table head-->

            <!--Table body-->
            <!--Table body-->
            <tbody>
              <tr *ngFor="let draft of draftJobs">
                <td> {{draft.jobName}}</td>
                <td> {{draft.company}}</td>
                <td> {{draft.city}}, {{draft.country}} </td>
                <td> {{draft.jobCategory}} </td>
                <td>{{draft.jobType}}</td>
                <td> <button type="button" class="btn" (click)="openEdit(content, draft)"> <i class="material-icons">
                    edit
                    </i>  </button> </td>
              </tr>
            </tbody>
            <!--Table body-->
          </table>
          <!--Table-->


        </ng-template>
      </ngb-tab>


      <ngb-tab title="Add Job">
        <ng-template ngbTabContent>
          <p>
            <h3> New Job </h3>

            <div>
              <form [formGroup]="newJobForm" autocomplete="off" (ngSubmit)="createJob(newJobForm.value)">

                <div class="row smallrow">
                    <div class="form-group col-sm-6">
                        <label for="jobName"> <strong>Job Title</strong></label>
                        <input formControlName="jobName" type="text" class="form-control" id="name">
                      </div>
                      <div class="form-group col-sm-6">
                        <label for="jobCompany"> <strong>Company</strong></label>
                        <input formControlName="jobCompany" type="text" class="form-control" id="company" disabled [value]="currentCompany.name">
                      </div>
                </div>

                <!-- <div class="row smallrow">
                    <div class="form-group col-sm-6">
                        <label for="jobCity"><strong>City</strong></label>
                        <input formControlName="jobCity" type="text" class="form-control" id="city" 
                        disabled [value]="currentAddress.city">
                      </div>
      
                      <div class="form-group col-sm-6">
                        <label for="jobCountry"><strong>Country</strong></label>
                        <select formControlName="jobCountry" id="country" class="form-control"
                        disabled [value]="currentAddress.country">
                          <option selected>Puerto Rico</option>
                          <option>United States of America</option>
                        </select>
                      </div>
                </div> -->

                <div class="row smallrow">
                    <div class="form-group col-sm-6">
                        <label for="jobCategory"><strong>Category</strong></label>
                        <select formControlName="jobCategory" id="category" class="form-control"
                            (change)="selectJobCatChangeHandler($event)">
                            <option value="null" disabled="true" [selected]="true">- Select Category -</option>
                          <option *ngFor=" let selectedCategory of categories">{{selectedCategory.name}}</option>
                        </select>
                      </div>
      
                      <div class="form-group col-sm-6">
                        <label for="jobType"><strong> Type</strong></label>
                        <select formControlName="jobType" id="type" class="form-control"
                          (change)="selectJobTypeChangeHandler($event)" aria-placeholder="- Select Type -">
                          <option value="null" disabled="true" [selected]="true">- Select Type -</option>
                          <option *ngFor=" let selectedType of types">{{selectedType.name}}</option>
                        </select>
                      </div>
                </div>

                <div class="row smallrow">
                    <div class="form-group col-sm-6">
                        <label for="jobDescription"><strong>Description</strong></label>
                        <textarea class="form-control" formControlName="jobDescription" name="description" rows="7" cols="60" style="resize: none;"> </textarea>
                      </div>
                </div>

                <div class="row mdrow" style="margin-top: 12em" >
                  <div class="col-sm-6">
                <button class="btn btn-sm" type="submit">Submit</button>
                </div>
              </div>
                <!-- <input type="submit" value="Submit" (click)="createJob(newJobForm.value)"> -->

              </form>

            </div>


        </ng-template>
      </ngb-tab>
    </ngb-tabset>

  </div>
