<!DOCTYPE html>

<html>

<head>

  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.css" />

  <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Keep link for icons/ make sure to add to all htmls with icons-->

  <style>
  </style>

</head>

<body>


  <div class="container">

    <div>
      <h3> A.2 Search Jobs</h3>
      <h3>Start Searching</h3>
      <div class="card" style="border-right: white; border-left: white;">
        <div class="card-body">

          <!-- <div class="row" style="padding-bottom: 10px;">
            <div class="col-sm-6">
              <button *ngIf="!pageFilterActive" type="button" class="btn" (click)="pageFilterActive = true"><i class="material-icons">
                  filter_list</i> Show page filter
              </button>
              <button *ngIf="pageFilterActive" type="button" class="btn" (click)="pageFilterActive = false"><i class="material-icons">
                  filter_list</i> Hide page filter
              </button>
            </div>

            <div class="col-sm-6">
              <button *ngIf="!searchActive" type="button" class="btn" (click)="searchActive = true"><i class="material-icons">
                  search</i> Show Search
              </button>

              <button *ngIf="searchActive" type="button" class="btn" (click)="searchActive = false"><i class="material-icons">
                  search</i> Hide Search
              </button>
            </div>
          </div> -->

          <!-- <div class="col-md-12 " *ngIf="searchActive"> -->
            <label for="sortBy"><strong> Search: </strong></label><br>
            <div class="row " style="height:3em;">
              <!-- <div class="col-sm-2">
                <select (change)="sortDropdownChangeHandler($event)" id="sortBy" class=" custom-select">
                  <option selected> All Jobs</option>
                  <option> Job Title </option>
                  <option> Company </option>
                  <option> Location/City </option>
                  <option> Location/Country </option>
                  <option> Category </option>
                  <option> Type </option>
                </select>
              </div>
              <div class="col-sm-2">
                <select (change)="sortParamDropdownChangeHandler($event)" id="sortBy" class=" custom-select">
                  <option selected value="">Sort Type</option>
                  <option> Sort A-Z </option>
                  <option> Sort Z-A </option>
                </select> <br>
              </div> -->
              <div class="col-sm-6">
                <input [(ngModel)]='searchBarInput' type="search" id="searchBar" class="form-control " placeholder="Start Typing..." style="width:110%;">
              </div>

              <div class="col-sm-2">
                <button type="button" class="btn" (click)="universalSearch()" style=" margin-left: 50px;">
                  <i class="material-icons">search</i> Search</button>
              </div>

            </div>
          <!-- </div> -->

          <!-- <div *ngIf="pageFilterActive">
            <label for="filterBy"><strong> Filter by: </strong></label> <br>
            <div class="row">
              <div class="col-sm-2" style="align-self: center;align-items: center; align-content: center;">
                <select (change)="selectDropdownChangeHandler($event)" id="filter" class=" custom-select">
                  <option selected> All Jobs</option>
                  <option> Job Title </option>
                  <option> Company </option>
                  <option> Location/City </option>
                  <option> Location/Country </option>
                  <option> Category </option>
                  <option> Type </option>
                </select>
              </div>
              <div class="col-sm-10" style="align-self: center;align-items: center;align-content: center;">
                <input [(ngModel)]='listFilter' type="search" id="searchBar" class="form-control " style="margin-bottom: 1em; margin-top: 2%"
                  placeholder="Start Typing...">
              </div>
            </div>
          </div> -->

          <div class="row" >
            <div class="col-md-12" style="text-align: end">
              <p *ngIf="totalJobs === undefined || totalJobs === 0"> Showing 0 of 0 </p>
              <p *ngIf="!(totalJobs === undefined || totalJobs === 0) && (page != paginatorSize)">Showing {{pageSize * page}} of {{totalJobs}}</p>
              <p *ngIf="(page === paginatorSize ) && (totalJobs != undefined || totalJobs != 0)">Showing {{totalJobs}} of {{totalJobs}}</p>
            </div>
          </div>

          <table matSort (matSortChange)="sortData($event)" id="example" class="table table-hover table-striped">
            <thead>
              <tr>
                <th mat-sort-header="jobName">Job Title</th>
                <th mat-sort-header="company">Company</th>
                <th mat-sort-header="location">Location</th>
                <th mat-sort-header="jobCategory">Category</th>
                <th mat-sort-header="jobType">Type</th>
                <th>Apply</th>
              </tr>
            </thead>
            <tbody *ngIf="sortedData === undefined">
              No jobs to show
            </tbody>
            <tbody *ngIf="!(sortedData === undefined)">
              <tr align="center" *ngFor="let job of sortedData">
                <td>{{job.jobName}}</td>
                <td>{{job.company}}</td>
                <td>{{job.city}}, {{job.country}}</td>
                <td>{{job.jobCategory}}</td>
                <td>{{job.jobType}}</td>
                <td> <button type="button" class=" btn" (click)="applyButtonClicked(job.jobId)"><i class="material-icons">
                      input
                    </i> Apply</button> 
                </td>
              </tr>
            </tbody>
          </table>
          <hr>

          <ngb-pagination id="paginator" [collectionSize]="paginatorCollectionSize" [(page)]="page" [maxSize]="paginatorSize" [rotate]="true"
            [ellipses]="false" [boundaryLinks]="true" (pageChange)="loadPage($event)" class="d-flex justify-content-center">
          </ngb-pagination>

        </div>
      </div>

    </div>

  </div>



</body>

</html>